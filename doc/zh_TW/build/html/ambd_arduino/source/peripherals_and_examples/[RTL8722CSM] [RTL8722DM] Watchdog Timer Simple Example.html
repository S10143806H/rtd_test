

<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>[RTL8722CSM] [RTL8722DM] Watchdog Timer Simple Example &mdash; amebaDoc 0.0.1 說明文件</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜尋" href="../../../search.html" />
    <link rel="next" title="[RTL8722CSM/RTL8722DM] Audio Codec – Basic Input Output" href="BasicInputOutput.html" />
    <link rel="prev" title="[RTL8722CSM] [RTL8722DM] Simple RTC Alarm" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Simple%20RTC%20Alarm.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> amebaDoc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">開源開發平台:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arduino_index.html">Arduino 開發平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/source/index.html">Micropython SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Standard SDK</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">amebaDoc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../arduino_index.html">Arduino 開發平台</a> &raquo;</li>
        
          <li><a href="../index.html">RTL8722DM</a> &raquo;</li>
        
          <li><a href="index.html">周邊設備和示例</a> &raquo;</li>
        
          <li><a href="Peripheral%20Examples.html">周邊設備示例</a> &raquo;</li>
        
      <li>[RTL8722CSM] [RTL8722DM] Watchdog Timer Simple Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/ambd_arduino/source/peripherals_and_examples/[RTL8722CSM] [RTL8722DM] Watchdog Timer Simple Example.rst.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rtl8722csm-rtl8722dm-watchdog-timer-simple-example">
<h1>[RTL8722CSM] [RTL8722DM] Watchdog Timer Simple Example<a class="headerlink" href="#rtl8722csm-rtl8722dm-watchdog-timer-simple-example" title="本標題的永久連結">¶</a></h1>
<p>Materials</p>
<ul class="simple">
<li><p>Ameba D [RTL8722 CSM/DM] x 1</p></li>
</ul>
<p>Example</p>
<p>In this example, we will use this simple watchdog timer example runs on
the Ameba RTL8722 module to illustrate how to use the watchdog API.
Before we get into the details of the example, let’s briefly go through
the definition of Watchdog as well as it’s working principles.</p>
<p><strong>Watchdog</strong></p>
<p>Watchdog Timer (WDT) is a hardware timer that is used to detect the
occurrence of a software fault, then automatically generates a system
reset or a watchdog interrupt on the expiry of a programmed period.</p>
<p>In layman terms, imagine in the situation while your micro-controller is
confused in an infinity loop, or any case like the micro-controller hang
while performing some tasks. The normal troubleshooting method would be
to press the reset button and jump out of the infinity loop. However, is
it practically impossible to do press on the button all time, therefore,
the watchdog timer that embedded inside the micro-controller would help
with this situation.</p>
<a class="reference internal image-reference" href="../../../_images/image11.gif"><img alt="1" src="../../../_images/image11.gif" style="width: 6.25in; height: 7.40972in;" /></a>
<p><strong>Feed the Dog</strong></p>
<p>If you have a dog in your home. You need to feed that dog at a regular
interval. if you can’t feed one day, it will bite you! And likewise,
this is the working logic behind the watchdog timer.</p>
<div class="line-block">
<div class="line">In our example, we created 2 tasks that contain some loop that runs
over and over again, one is called a successful task and the other is
a failed task. We are enabling the watchdog timer is loaded with an
initial value (5 seconds) greater than the total delay in the
successful task, but shorter than the failed task.</div>
<div class="line">For the successful case, the watchdog is being refreshed/feed within 5
seconds, however, for the failed case, the loop is under processing
and the watchdog is not being fresh after 5 seconds, which triggers
the watchdog (dog barks), an interrupt is generated to reset the
processor. Likewise, the watchdog timer protects the micro-controller
from the hanging case.</div>
</div>
<p>Then we move to the coding part for this example, for this example, you
will only need the Ameba RTL8722 board itself.</p>
<a class="reference internal image-reference" href="../../../_images/image2134.png"><img alt="1" src="../../../_images/image2134.png" style="width: 6.25in; height: 5.99306in;" /></a>
<p>Firstly, make sure the correct Ameba development board is selected in
Arduino IDE: “Tools” -&gt; “Board” -&gt; “RTL8722CSM/RTL8722DM”. Then open the
“Watchdog Timer” example in “File” -&gt; “Examples” -&gt; “AmebaWatchdog” -&gt;
“Watchdog Timer”:</p>
<a class="reference internal image-reference" href="../../../_images/image390.png"><img alt="1" src="../../../_images/image390.png" style="width: 6.25in; height: 5.99306in;" /></a>
<p>Upon successfully upload the sample code, open the serial monitor, and
press the reset button. You will find that the successful task (small
task) can refresh the watchdog within the 5 seconds (initialized in the
watchdog timer). However, the failed task (big task) will not be able to
refresh the watchdog within 5 seconds, which leads to the
microcontroller reset.</p>
<a class="reference internal image-reference" href="../../../_images/image476.png"><img alt="1" src="../../../_images/image476.png" style="width: 3.125in; height: 5.99306in;" /></a>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="BasicInputOutput.html" class="btn btn-neutral float-right" title="[RTL8722CSM/RTL8722DM] Audio Codec – Basic Input Output" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Simple%20RTC%20Alarm.html" class="btn btn-neutral float-left" title="[RTL8722CSM] [RTL8722DM] Simple RTC Alarm" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版權所有 2021, Ameba IoT。

    </p>
  </div>
    
    
    
    利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    
    由 <a href="https://readthedocs.org">Read the Docs</a>开发. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>