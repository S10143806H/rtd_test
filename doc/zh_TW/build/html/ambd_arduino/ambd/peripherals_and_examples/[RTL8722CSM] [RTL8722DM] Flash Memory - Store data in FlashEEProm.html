

<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>[RTL8722CSM] [RTL8722DM] Flash Memory - Store data in FlashEEProm &mdash; amebaDoc 0.0.1 說明文件</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜尋" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> amebaDoc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">開源開發平台:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arduino_index.html">Arduino 開發平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/source/index.html">Micropython 開發平台</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Standard SDK</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">amebaDoc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>[RTL8722CSM] [RTL8722DM] Flash Memory - Store data in FlashEEProm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/ambd_arduino/ambd/peripherals_and_examples/[RTL8722CSM] [RTL8722DM] Flash Memory - Store data in FlashEEProm.rst.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rtl8722csm-rtl8722dm-flash-memory-store-data-in-flasheeprom">
<h1>[RTL8722CSM] [RTL8722DM] Flash Memory - Store data in FlashEEProm<a class="headerlink" href="#rtl8722csm-rtl8722dm-flash-memory-store-data-in-flasheeprom" title="本標題的永久連結">¶</a></h1>
<p>Preparation</p>
<ul class="simple">
<li><p>Ameba x 1</p></li>
</ul>
<p>Example</p>
<div class="line-block">
<div class="line">Ameba provides Flash Memory component for data storage and the data
can be preserved when the power is off if necessary, e.g., compiled
program. To avoid the memory space overlapped with the program on
Ameba, the Flash API uses the tail part of the address space, with
sector size 4K.</div>
<div class="line">In this example, we store the value of boot times in flash memory.
Every time Ameba reboots, it reads the boot times from flash,
increases the value by 1, and writes it back to flash memory.</div>
</div>
<div class="line-block">
<div class="line">First open the example, “File” -&gt; “Example” -&gt; “AmebaFlashMemory” -&gt;
“FlashMemoryBasic”</div>
<div class="line"><a class="reference internal" href="../../../_images/image125.png"><img alt="1" src="../../../_images/image125.png" style="width: 5.125in; height: 8.00694in;" /></a></div>
</div>
<div class="line-block">
<div class="line">Compile and upload to Ameba, then press the reset button.</div>
<div class="line">Open the Serial Monitor, press the reset button for a few times. Then
you can see the boot times value increases.</div>
<div class="line"><a class="reference internal" href="../../../_images/image225.png"><img alt="2" src="../../../_images/image225.png" style="width: 6.125in; height: 3.86111in;" /></a></div>
</div>
<p>Code Reference</p>
<p>By default, the Flash Memory API uses address 0xFF000~0xFFFFF to store
data.</p>
<p>There is limitation when writing to flash memory. That is, you can not
directly write data to the same address you used in last write. To do
that correctly, you need erase the sector first. The Flash API of Ameba
uses a 4K SRAM to record the user modification and do the erase/write
task together.</p>
<div class="line-block">
<div class="line">Use FlashMemory.read() to read from Flash memory.</div>
<div class="line">Use FlashMemory.buf[0] = 0x00; to manipulate the 4K buf.</div>
<div class="line">Use FlashMemory.update(); to update the data in buf to Flash Memory.</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; 版權所有 2021, Ameba IoT。

    </p>
  </div>
    
    
    
    利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    
    由 <a href="https://readthedocs.org">Read the Docs</a>开发. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>